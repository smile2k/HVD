
+ Publisher -> class phát đi sự kiện
+ Subcriber -< class nhận sự kiện

+ Khi sử dụng ***event*** thì không thể gán (=) mà chỉ có thể sử dụng (+=) hoặc (-=) 

+ Dùng Lambda đăng ký nhận sự kiện
```CSharp
// Publisher
UserInput userInput = new UserInput();
userInput.InputNumberEvent += x =>
{
    Console.WriteLine(x);
};
```

## Use EventHandler
```CSharp
using System;
using System.Diagnostics.Tracing;

namespace CS_Event
{
    public delegate void InputNumberEvent(int x);
    class Data : EventArgs
    {
        public int DataInput { get; set; }
        public Data(int x)
        {
            DataInput = x;
        }
    }
    class UserInput
    {
        // Delegate void NAME(object? sender, EventArgs args)
        public event EventHandler InputNumberEventHandler;
       
        public void Input() 
        {
            do
            {
                string s = Console.ReadLine();
                int i = int.Parse(s);
                // Publish event: Publisher
                InputNumberEventHandler?.Invoke(this, new Data(i));
            }
            while (true);
        }

    }

    class CalcSquare
    {
        public void Subcribe(UserInput userInput)
        {
            userInput.InputNumberEventHandler += Square;
        }

        public void Square(object sender, EventArgs eventArgs)
        {
            Data data = (Data)eventArgs;
            int i = data.DataInput;
            Console.WriteLine($"Square of {i} = {Math.Sqrt(i)}");
        }
    }

    class CalcSquareRoot
    {
        public void Subcribe(UserInput userInput)
        {
            userInput.InputNumberEventHandler += SquareRoot;
        }

        public void SquareRoot(object sender, EventArgs eventArgs)
        {
            Data data = (Data)eventArgs;
            int i = data.DataInput;
            Console.WriteLine($"Square Root of {i} = {i*i}");
        }
    }


    class Program
    {
        static void Main(string[] args)
        {
            // Publisher
            UserInput userInput = new UserInput();
            userInput.InputNumberEventHandler += (sender, e) =>
            {
                Data data = (Data)e;
                int i = data.DataInput;
                Console.WriteLine(i);
            };

            // Subcriber
            CalcSquare square = new CalcSquare();
            square.Subcribe(userInput);

            CalcSquareRoot squareRoot = new CalcSquareRoot();
            squareRoot.Subcribe(userInput);

            userInput.Input();
        }
    }

}
```
## CancelKeyPress Event
```CSharp
Console.CancelKeyPress += (sender, e) =>
{
    Console.WriteLine("EXIT!");
};
```
## Example

### Use +=
```CSharp
using System;

namespace CS_Event
{
    public delegate void InputNumberEvent(int x);

    class UserInput
    {
        public InputNumberEvent InputNumberEvent { get; set; }
        public void Input() 
        {
            do
            {
                string s = Console.ReadLine();
                int i = int.Parse(s);
                // Publish event: Publisher
                InputNumberEvent?.Invoke(i);
            }
            while (true);
        }

    }

    class CalcSquare
    {
        public void Subcribe(UserInput userInput)
        {
            userInput.InputNumberEvent += Square;
        }

        public void Square(int i)
        {
            Console.WriteLine($"Square of {i} = {Math.Sqrt(i)}");
        }
    }

    class CalcSquareRoot
    {
        public void Subcribe(UserInput userInput)
        {
            userInput.InputNumberEvent += SquareRoot;
        }

        public void SquareRoot(int i)
        {
            Console.WriteLine($"Square Root of {i} = {i*i}");
        }
    }


    class Program
    {
        static void Main(string[] args)
        {
            // Publisher
            UserInput userInput = new UserInput();

            // Subcriber
            CalcSquare square = new CalcSquare();
            square.Subcribe(userInput);

            CalcSquareRoot squareRoot = new CalcSquareRoot();
            squareRoot.Subcribe(userInput);

            userInput.Input();
        }
    }

}
```

### Use event to add multi method
```CSharp
using System;

namespace CS_Event
{
    public delegate void InputNumberEvent(int x);

    class UserInput
    {
        public event InputNumberEvent InputNumberEvent;
        public void Input() 
        {
            do
            {
                string s = Console.ReadLine();
                int i = int.Parse(s);
                // Publish event: Publisher
                InputNumberEvent?.Invoke(i);
            }
            while (true);
        }

    }

    class CalcSquare
    {
        public void Subcribe(UserInput userInput)
        {
            userInput.InputNumberEvent += Square;
        }

        public void Square(int i)
        {
            Console.WriteLine($"Square of {i} = {Math.Sqrt(i)}");
        }
    }

    class CalcSquareRoot
    {
        public void Subcribe(UserInput userInput)
        {
            userInput.InputNumberEvent += SquareRoot;
        }

        public void SquareRoot(int i)
        {
            Console.WriteLine($"Square Root of {i} = {i*i}");
        }
    }


    class Program
    {
        static void Main(string[] args)
        {
            // Publisher
            UserInput userInput = new UserInput();

            // Subcriber
            CalcSquare square = new CalcSquare();
            square.Subcribe(userInput);

            CalcSquareRoot squareRoot = new CalcSquareRoot();
            squareRoot.Subcribe(userInput);

            userInput.Input();
        }
    }

}
```